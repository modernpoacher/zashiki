"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.object.to-string");require("core-js/modules/es.promise");Object.defineProperty(exports,"__esModule",{value:true});exports.default=getComponents;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _interopRequireWildcard2=_interopRequireDefault(require("@babel/runtime/helpers/interopRequireWildcard"));require("regenerator-runtime/runtime");var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _debug=_interopRequireDefault(require("debug"));var _path=require("path");var _boom=_interopRequireDefault(require("@hapi/boom"));var _config=_interopRequireDefault(require("../../../config"));var _config2=require("@modernpoacher/zashiki-transport/lib/config");var _exception=require("../../exception");var log=(0,_debug.default)('zashiki:common:components:debark:get-components');log('`getComponents` is awake');var _zashiki$get=_config.default.get('zashiki:components'),components=_zashiki$get.debark;function getComponents(){return _getComponents.apply(this,arguments);}function _getComponents(){_getComponents=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(){var params,_yield$import,_yield$import$DEBARK_,DEBARK,_args=arguments;return _regenerator.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=_args.length>0&&_args[0]!==undefined?_args[0]:{};log('getComponents');_context.prev=2;_context.next=5;return Promise.resolve("".concat((0,_path.resolve)(components))).then(function(s){return(0,_interopRequireWildcard2.default)(require(s));});case 5:_yield$import=_context.sent;_yield$import$DEBARK_=_yield$import[_config2.DEBARK_STAGE];DEBARK=_yield$import$DEBARK_===void 0?{}:_yield$import$DEBARK_;return _context.abrupt("return",DEBARK);case 11:_context.prev=11;_context.t0=_context["catch"](2);throw _boom.default.badImplementation(_exception.BAD_IMPLEMENTATION);case 14:case"end":return _context.stop();}}},_callee,null,[[2,11]]);}));return _getComponents.apply(this,arguments);}